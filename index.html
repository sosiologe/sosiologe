<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üéÑ –ù–æ–≤–æ–≥–æ–¥–Ω–∏–π –ö–æ–Ω–≤–µ—Ä—Ç–µ—Ä –í–∞–ª—é—Ç üéÑ</title>
    <style>
        /* --- CSS: –ù–æ–≤–æ–≥–æ–¥–Ω–∏–µ –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¢–µ–º—ã --- */
        :root {
            /* –°–≤–µ—Ç–ª–∞—è –ù–æ–≤–æ–≥–æ–¥–Ω—è—è –¢–µ–º–∞ */
            --primary-color: #c0392b; /* –ö—Ä–∞—Å–Ω—ã–π */
            --bg-color: #ecf0f1;     /* –°–≤–µ—Ç–ª–æ-—Å–µ—Ä—ã–π —Å–Ω–µ–∂–Ω—ã–π */
            --card-bg: #ffffff;
            --text-color: #2c3e50;   /* –¢–µ–º–Ω–æ-—Å–µ—Ä—ã–π */
            --text-secondary: #95a5a6;
            --border-color: #dcdde1;
            --input-bg: #ffffff;
            --shadow: 0 10px 30px rgba(0,0,0,0.15);
            --hover-swap: #e74c3c;
            --snow-color: #ecf0f1; /* –¶–≤–µ—Ç —Å–Ω–µ–≥–∞ –¥–ª—è —Ñ–æ–Ω–∞ */
            --accent-glow: 0 0 15px rgba(231, 76, 60, 0.6); /* –ö—Ä–∞—Å–Ω–æ–µ —Å–≤–µ—á–µ–Ω–∏–µ */
        }

        body.dark-mode {
            /* –¢–µ–º–Ω–∞—è –ù–æ–≤–æ–≥–æ–¥–Ω—è—è –¢–µ–º–∞ */
            --primary-color: #27ae60; /* –ó–µ–ª–µ–Ω—ã–π */
            --bg-color: #2c3e50;     /* –¢–µ–º–Ω–æ-—Å–∏–Ω–∏–π/–ø–æ—á—Ç–∏ —á–µ—Ä–Ω—ã–π —Ñ–æ–Ω */
            --card-bg: #34495e;      /* –¢–µ–º–Ω–æ-—Å–µ—Ä—ã–π –¥–ª—è –∫–∞—Ä—Ç–æ—á–∫–∏ */
            --text-color: #ecf0f1;
            --text-secondary: #bdc3c7;
            --border-color: #44607e;
            --input-bg: #2d3e4f;
            --shadow: 0 10px 30px rgba(0,0,0,0.4);
            --hover-swap: #2ecc71;
            --snow-color: #2d3e50; /* –¢–µ–º–Ω—ã–π —Å–Ω–µ–≥ –¥–ª—è —Ñ–æ–Ω–∞ */
            --accent-glow: 0 0 15px rgba(46, 204, 113, 0.6); /* –ó–µ–ª–µ–Ω–æ–µ —Å–≤–µ—á–µ–Ω–∏–µ */
        }

        /* –û–±—â–∏–µ —Å—Ç–∏–ª–∏ –¥–ª—è –ø–ª–∞–≤–Ω—ã—Ö –ø–µ—Ä–µ—Ö–æ–¥–æ–≤ */
        body, .container, input, select, .swap-btn, td, .theme-toggle-btn {
            transition: all 0.5s ease-in-out;
        }

        body {
            background-color: var(--bg-color);
            font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
            display: flex;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            margin: 0;
            padding: 20px;
            color: var(--text-color);
            position: relative;
            overflow: hidden; /* –ß—Ç–æ–±—ã —Å–Ω–µ–∂–∏–Ω–∫–∏ –Ω–µ —Å–æ–∑–¥–∞–≤–∞–ª–∏ —Å–∫—Ä–æ–ª–ª–±–∞—Ä */
            background-image:
                url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" opacity="0.1"><circle cx="20" cy="20" r="10" fill="%23ccc" /><circle cx="80" cy="80" r="15" fill="%23ccc" /><circle cx="50" cy="50" r="8" fill="%23ccc" /></svg>'),
                linear-gradient(to bottom, var(--snow-color) 0%, rgba(255,255,255,0) 100%);
            background-size: 100px 100px, cover;
            background-attachment: fixed;
        }

        /* --- –ö–Ω–æ–ø–∫–∞ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è —Ç–µ–º—ã --- */
        .theme-toggle-btn {
            position: absolute;
            top: 20px;
            right: 20px;
            background: none;
            border: none;
            cursor: pointer;
            width: 48px;
            height: 48px;
            display: flex;
            align-items: center;
            justify-content: center;
            outline: none;
            z-index: 100; /* –ü–æ–≤–µ—Ä—Ö —Å–Ω–µ–∂–∏–Ω–æ–∫ */
            color: var(--primary-color);
        }

        .icon-sun, .icon-moon {
            position: absolute;
            width: 32px;
            height: 32px;
            transition: all 0.6s cubic-bezier(0.68, -0.55, 0.27, 1.55);
            filter: drop-shadow(0 0 5px rgba(0,0,0,0.3)); /* –¢–µ–Ω—å –¥–ª—è –∏–∫–æ–Ω–æ–∫ */
        }

        /* –ù–æ–≤–æ–≥–æ–¥–Ω–∏–µ –∏–∫–æ–Ω–∫–∏ (—Å–Ω–µ–∂–∏–Ω–∫–∞ –≤–º–µ—Å—Ç–æ —Å–æ–ª–Ω—Ü–∞, –∑–≤–µ–∑–¥–æ—á–∫–∞ –≤–º–µ—Å—Ç–æ –ª—É–Ω—ã) */
        .icon-sun { /* –í —Å–≤–µ—Ç–ª–æ–π —Ç–µ–º–µ - —Å–Ω–µ–∂–∏–Ω–∫–∞ */
            color: #87CEEB; /* –°–≤–µ—Ç–ª–æ-–≥–æ–ª—É–±–æ–π */
            opacity: 1; transform: scale(1) rotate(0deg);
        }
        .icon-moon { /* –í —Ç–µ–º–Ω–æ–π —Ç–µ–º–µ - –∑–≤–µ–∑–¥–æ—á–∫–∞ */
            color: #FFD700; /* –ó–æ–ª–æ—Ç–æ–π */
            opacity: 0; transform: scale(0) rotate(180deg);
        }

        body.dark-mode .icon-sun { opacity: 0; transform: scale(0) rotate(-180deg); }
        body.dark-mode .icon-moon { opacity: 1; transform: scale(1) rotate(0deg); }

        /* --- –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä (–∫–∞—Ä—Ç–æ—á–∫–∞) --- */
        .container {
            background-color: var(--card-bg);
            padding: 35px;
            border-radius: 25px; /* –ë–æ–ª–µ–µ –º—è–≥–∫–∏–µ —É–≥–ª—ã */
            box-shadow: var(--shadow);
            width: 100%;
            max-width: 380px;
            text-align: center;
            position: relative; /* –î–ª—è Z-index —Å–Ω–µ–∂–∏–Ω–æ–∫ */
            z-index: 10;
            overflow: hidden; /* –û–±—Ä–µ–∑–∞–µ—Ç —Å–Ω–µ–∂–∏–Ω–∫–∏, –µ—Å–ª–∏ –æ–Ω–∏ –∑–∞—Ö–æ–¥—è—Ç –∑–∞ –≥—Ä–∞–Ω–∏—Ü—ã –∫–∞—Ä—Ç–æ—á–∫–∏ */
            border: 2px solid var(--primary-color); /* –ù–æ–≤–æ–≥–æ–¥–Ω—è—è —Ä–∞–º–∫–∞ */
        }

        h1 {
            color: var(--primary-color);
            margin: 0 0 10px 0;
            font-size: 28px;
            text-shadow: 1px 1px 3px rgba(0,0,0,0.1);
        }
        .subtitle {
            color: var(--text-secondary);
            font-size: 14px;
            margin-bottom: 30px;
        }

        .currency-box {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 15px;
        }

        select, input {
            padding: 14px;
            border: 1px solid var(--border-color);
            border-radius: 12px;
            background: var(--input-bg);
            color: var(--text-color);
            font-size: 17px;
            box-shadow: inset 0 1px 3px rgba(0,0,0,0.05);
        }

        select { width: 38%; cursor: pointer; font-weight: bold; }
        input { width: 55%; text-align: right; }
        input:focus, select:focus { border-color: var(--primary-color); outline: none; box-shadow: var(--accent-glow); }

        /* --- –í—ã—Ä–∞–≤–Ω–∏–≤–∞–Ω–∏–µ —Å—Ç—Ä–µ–ª–æ—á–µ–∫ --- */
        .swap-container {
            display: flex;
            justify-content: center;
            align-items: center;
            width: 100%;
            margin: 20px 0; /* –£–≤–µ–ª–∏—á–∏–ª –æ—Ç—Å—Ç—É–ø—ã */
        }

        .swap-btn {
            background-color: var(--primary-color);
            color: #ffffff;
            border: none;
            border-radius: 50%;
            width: 52px;
            height: 52px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 0;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            transition: transform 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275), background-color 0.3s;
        }

        .swap-btn:hover { transform: scale(1.15) rotate(360deg); background-color: var(--hover-swap); }
        .swap-btn:active { transform: scale(0.9) rotate(180deg); } /* –õ–µ–≥–∫–æ–µ –Ω–∞–∂–∞—Ç–∏–µ */

        /* SVG —Å—Ç—Ä–µ–ª–æ—á–∫–∏ –≤–Ω—É—Ç—Ä–∏ –∫–Ω–æ–ø–∫–∏ */
        .swap-btn svg {
            width: 28px;
            height: 28px;
        }

        .rate-info { margin: 25px 0; font-weight: bold; color: var(--primary-color); font-size: 16px; text-shadow: 0 0 5px rgba(0,0,0,0.1); }

        /* --- –¢–∞–±–ª–∏—Ü–∞ –∫—É—Ä—Å–æ–≤ --- */
        .rates-container { margin-top: 30px; border-top: 1px solid var(--border-color); padding-top: 20px; }
        .rates-table { width: 100%; border-collapse: collapse; font-size: 14px; }
        .rates-table td {
            padding: 10px 0;
            border-bottom: 1px dashed var(--border-color); /* –ü—É–Ω–∫—Ç–∏—Ä –¥–ª—è –ª–µ–≥–∫–æ—Å—Ç–∏ */
            color: var(--text-color);
        }
        .rates-table td:last-child { text-align: right; font-weight: bold; }
        .curr-label { color: var(--primary-color); font-weight: bold; margin-right: 5px; }

        /* --- –ê–Ω–∏–º–∞—Ü–∏—è —Å–Ω–µ–∂–∏–Ω–æ–∫ --- */
        .snowflake {
            position: absolute;
            background-color: white;
            border-radius: 50%;
            opacity: 0.8;
            pointer-events: none; /* –ß—Ç–æ–±—ã —Å–Ω–µ–∂–∏–Ω–∫–∏ –Ω–µ –º–µ—à–∞–ª–∏ –∫–ª–∏–∫–∞—Ç—å */
            animation: fall linear forwards;
            z-index: 1; /* –ü–æ–¥ –æ—Å–Ω–æ–≤–Ω—ã–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–º */
        }

        @keyframes fall {
            to {
                transform: translateY(100vh);
                opacity: 0;
            }
        }
    </style>
</head>
<body class="light-mode">

    <button class="theme-toggle-btn" id="theme-toggle" title="–ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å —Ç–µ–º—É">
        <svg class="icon-sun" fill="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
            <path d="M12 2c-.55 0-1 .45-1 1v1c0 .55.45 1 1 1s1-.45 1-1V3c0-.55-.45-1-1-1zM21 12c0-.55-.45-1-1-1h-1c-.55 0-1 .45-1 1s.45 1 1 1h1c.55 0 1-.45 1-1zM4 12c0-.55-.45-1-1-1H2c-.55 0-1 .45-1 1s.45 1 1 1h1c.55 0 1-.45 1-1zM18.36 5.64c-.39-.39-1.03-.39-1.41 0-.39.39-.39 1.03 0 1.41l.71.71c.39.39 1.03.39 1.41 0s.39-1.03 0-1.41l-.71-.71zM5.64 18.36c-.39-.39-1.03-.39-1.41 0-.39.39-.39 1.03 0 1.41l.71.71c.39.39 1.03.39 1.41 0s.39-1.03 0-1.41l-.71-.71zM19.07 18.36c.39-.39.39-1.03 0-1.41l-.71-.71c-.39-.39-1.03-.39-1.41 0-.39.39-.39 1.03 0 1.41l.71.71c.39.39 1.03.39 1.41 0zM5.64 5.64c.39-.39.39-1.03 0-1.41l-.71-.71c-.39-.39-1.03-.39-1.41 0-.39.39-.39 1.03 0 1.41l.71.71zM12 8c-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4z"/>
        </svg>
        <svg class="icon-moon" fill="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
            <path d="M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"/>
        </svg>
    </button>

    <div class="container">
        <h1>üéÑ –ö–æ–Ω–≤–µ—Ä—Ç–µ—Ä –í–∞–ª—é—Ç üéÑ</h1>
        <p class="subtitle">–ü—Ä–∞–∑–¥–Ω–∏—á–Ω—ã–π –∫—É—Ä—Å –æ–±–º–µ–Ω–∞</p>

        <div class="currency-box">
            <select id="currency-one">
                <option value="USD" selected>USD</option>
                <option value="EUR">EUR</option>
                <option value="RUB">RUB</option>
                <option value="KZT">KZT</option>
                <option value="CNY">CNY</option>
            </select>
            <input type="number" id="amount-one" value="1" step="any">
        </div>

        <div class="swap-container">
            <button class="swap-btn" id="swap" title="–ü–æ–º–µ–Ω—è—Ç—å –º–µ—Å—Ç–∞–º–∏">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M7 20V4M7 4L3 8M7 4L11 8" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    <path d="M17 4V20M17 20L13 16M17 20L21 16" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
            </button>
        </div>

        <div class="currency-box">
            <select id="currency-two">
                <option value="USD">USD</option>
                <option value="EUR">EUR</option>
                <option value="RUB" selected>RUB</option>
                <option value="KZT">KZT</option>
                <option value="CNY">CNY</option>
            </select>
            <input type="number" id="amount-two" placeholder="0" step="any">
        </div>

        <div class="rate-info" id="rate">–ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö...</div>

        <div class="rates-container">
            <table class="rates-table">
                <tbody id="rates-table-body">
                    </tbody>
            </table>
        </div>
    </div>

    <script>
        const themeBtn = document.getElementById('theme-toggle');
        const body = document.body;

        // --- 1. –õ–û–ì–ò–ö–ê –¢–ï–ú–´ –° –°–û–•–†–ê–ù–ï–ù–ò–ï–ú ---
        const currentTheme = localStorage.getItem('theme');
        if (currentTheme === 'dark') {
            body.classList.add('dark-mode');
        }

        themeBtn.addEventListener('click', () => {
            body.classList.toggle('dark-mode');
            const theme = body.classList.contains('dark-mode') ? 'dark' : 'light';
            localStorage.setItem('theme', theme);
        });

        // --- 2. –õ–û–ì–ò–ö–ê –ö–û–ù–í–ï–†–¢–ï–†–ê ---
        const currencyOne = document.getElementById('currency-one');
        const amountOne = document.getElementById('amount-one');
        const currencyTwo = document.getElementById('currency-two');
        const amountTwo = document.getElementById('amount-two');
        const rateEl = document.getElementById('rate');
        const swap = document.getElementById('swap');
        const ratesTableBody = document.getElementById('rates-table-body');

        function calculate() {
            const curr1 = currencyOne.value;
            const curr2 = currencyTwo.value;

            fetch(`https://api.exchangerate-api.com/v4/latest/${curr1}`)
                .then(res => res.json())
                .then(data => {
                    const rate = data.rates[curr2];
                    
                    rateEl.innerText = `1 ${curr1} = ${rate.toFixed(4)} ${curr2}`;
                    amountTwo.value = (amountOne.value * rate).toFixed(2);
                    
                    const popular = ['USD', 'EUR', 'RUB', 'KZT', 'CNY'].filter(c => c !== curr1);
                    ratesTableBody.innerHTML = '';
                    popular.forEach(c => {
                        const r = data.rates[c];
                        const row = `
                            <tr>
                                <td>1 ${curr1}</td>
                                <td>=</td>
                                <td><span class="curr-label">${c}</span> ${r.toFixed(2)}</td>
                            </tr>`;
                        ratesTableBody.innerHTML += row;
                    });
                })
                .catch(() => {
                    rateEl.innerText = "–û—à–∏–±–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è";
                });
        }

        currencyOne.addEventListener('change', calculate);
        amountOne.addEventListener('input', calculate);
        currencyTwo.addEventListener('change', calculate);
        amountTwo.addEventListener('input', calculate);

        swap.addEventListener('click', () => {
            const temp = currencyOne.value;
            currencyOne.value = currencyTwo.value;
            currencyTwo.value = temp;
            calculate();
        });

        calculate();

        // --- 3. –ê–ù–ò–ú–ê–¶–ò–Ø –°–ù–ï–ñ–ò–ù–û–ö ---
        function createSnowflake() {
            const snowflake = document.createElement('div');
            snowflake.classList.add('snowflake');
            document.body.appendChild(snowflake);

            const size = Math.random() * 5 + 5; // –û—Ç 5 –¥–æ 10px
            snowflake.style.width = `${size}px`;
            snowflake.style.height = `${size}px`;
            snowflake.style.left = `${Math.random() * 100}vw`; // –°–ª—É—á–∞–π–Ω–∞—è –ø–æ–∑–∏—Ü–∏—è –ø–æ –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª–∏
            snowflake.style.animationDuration = `${Math.random() * 10 + 5}s`; // –°–ª—É—á–∞–π–Ω–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å –ø–∞–¥–µ–Ω–∏—è
            snowflake.style.animationDelay = `${Math.random() * 5}s`; // –°–ª—É—á–∞–π–Ω–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞

            snowflake.addEventListener('animationend', () => {
                snowflake.remove(); // –£–¥–∞–ª—è–µ–º —Å–Ω–µ–∂–∏–Ω–∫—É –ø–æ—Å–ª–µ –ø–∞–¥–µ–Ω–∏—è
            });
        }

        // –°–æ–∑–¥–∞–µ–º —Å–Ω–µ–∂–∏–Ω–∫–∏ –∫–∞–∂–¥—ã–µ 500–º—Å
        setInterval(createSnowflake, 500);

    </script>
</body>
</html>
